<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MG Automotores — Publicación y Venta</title>
  <link rel="icon" href="assets/logo-mg.png">
  <link rel="stylesheet" href="styles.css" />
  <!-- Firebase SDKs -->
  <script defer src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage-compat.js"></script>
  <!-- Tu configuración (copiá firebase-config.js a partir del example) -->
  <script defer src="firebase-config.js"></script>
  <script defer src="app.js"></script>
</head>
<body>
  <!-- Header -->
  <header class="container">
    <div class="brand">
      <img src="assets/logo-mg.png" alt="MG Automotores" />
      <div>
        <h1>MG Automotores</h1>
        <p>Publicación • Venta • Asesoramiento</p>
      </div>
    </div>

    <nav class="actions">
      <button id="btn-login" class="btn ghost">Acceso vendedores</button>
      <button id="btn-nuevo" class="btn primary hidden">Publicar vehículo</button>
      <button id="btn-logout" class="btn ghost hidden">Salir</button>
    </nav>
  </header>

  <!-- Hero / Filtros -->
  <section class="hero">
    <h2>Encontrá tu próximo vehículo</h2>
    <form id="filterForm" class="filters">
      <input id="q" type="search" placeholder="Buscar por marca / modelo / versión…" />
      <select id="year">
        <option value="">Año</option>
      </select>
      <select id="order">
        <option value="createdAt_desc">Más nuevos</option>
        <option value="price_asc">Menor precio</option>
        <option value="price_desc">Mayor precio</option>
        <option value="km_asc">Menos km</option>
        <option value="km_desc">Más km</option>
      </select>
      <button class="btn">Aplicar</button>
      <button type="button" id="clearFilters" class="btn ghost">Limpiar</button>
    </form>
  </section>

  <!-- Grilla de autos -->
  <main class="container">
    <div id="carsGrid" class="grid"></div>
    <div id="emptyState" class="empty hidden">Por ahora no hay publicaciones que coincidan.</div>
    <div id="loader" class="loader">Cargando…</div>
  </main>

  <!-- Footer -->
  <footer>
    <div class="container footer-inner">
      <div>
        <strong>Contacto directo</strong>
        <ul class="contacts">
          <!-- Reemplazá con sus teléfonos (cód. país sin +, p.ej. 5493492xxxxx en AR) -->
          <li><a id="ctaMartin" target="_blank" rel="noopener">Martín</a></li>
          <li><a id="ctaGer" target="_blank" rel="noopener">Gerente</a></li>
        </ul>
      </div>
      <small>© <span id="yearNow"></span> MG Automotores — Rafaela, Santa Fe</small>
    </div>
  </footer>

  <!-- Modal publicación (solo vendedores autorizados) -->
  <dialog id="modalForm">
    <form id="carForm" method="dialog">
      <header class="modal-header">
        <h3>Publicar vehículo</h3>
        <button type="button" id="closeModal" class="icon">✕</button>
      </header>

      <div class="grid two">
        <label>Marca* <input name="make" required placeholder="Renault, Ford, etc."></label>
        <label>Modelo* <input name="model" required placeholder="Clio Mío, Ka, etc."></label>
        <label>Año* <input name="year" type="number" min="1950" max="2100" required></label>
        <label>Kilómetros* <input name="km" type="number" min="0" required></label>
        <label>Versión / Trim <input name="version" placeholder="Authentic, S, etc."></label>
        <label>Ubicación <input name="location" placeholder="Rafaela"></label>
        <label>Precio ARS* <input name="price" type="number" min="0" required></label>
        <label>Contacto (WhatsApp opcional) <input name="contactPhone" placeholder="5493..."></label>
      </div>

      <label>Descripción
        <textarea name="description" rows="3" placeholder="Pulido, cerámico, cubiertas nuevas…"></textarea>
      </label>

      <label>Características (separadas por coma)
        <input name="features" placeholder="4 cubiertas semi nuevas, Stereo original">
      </label>

      <label>Fotos (JPG/PNG, hasta 8)
        <input id="photos" type="file" accept="image/*" multiple>
      </label>

      <div class="modal-actions">
        <button class="btn" id="saveCar">Publicar</button>
        <button type="button" class="btn ghost" id="cancelCar">Cancelar</button>
      </div>
      <small class="muted">Las publicaciones se muestran al instante. Se pueden editar/eliminar desde Firestore.</small>
    </form>
  </dialog>

  <!-- Toast -->
  <div id="toast" class="toast hidden"></div>
</body>
</html>
